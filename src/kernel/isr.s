.CODE32
.GLOBAL ISR_BEGIN
.EXTERN ISR_HANDLER
ISR_BEGIN:
ISR0:
	CLI
	PUSHL $0
	PUSHL $0
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR1:
	CLI
	PUSHL $0
	PUSHL $1
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR2:
	CLI
	PUSHL $0
	PUSHL $2
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR3:
	CLI
	PUSHL $0
	PUSHL $3
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR4:
	CLI
	PUSHL $0
	PUSHL $4
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR5:
	CLI
	PUSHL $0
	PUSHL $5
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR6:
	CLI
	PUSHL $0
	PUSHL $6
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR7:
	CLI
	PUSHL $0
	PUSHL $7
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR8:
	CLI
	NOP
	NOP
	PUSHL $8
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR9:
	CLI
	PUSHL $0
	PUSHL $9
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR10:
	CLI
	NOP
	NOP
	PUSHL $10
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR11:
	CLI
	NOP
	NOP
	PUSHL $11
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR12:
	CLI
	NOP
	NOP
	PUSHL $12
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR13:
	CLI
	NOP
	NOP
	PUSHL $13
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR14:
	CLI
	NOP
	NOP
	PUSHL $14
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR15:
	CLI
	PUSHL $0
	PUSHL $15
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR16:
	CLI
	PUSHL $0
	PUSHL $16
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR17:
	CLI
	PUSHL $0
	PUSHL $17
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR18:
	CLI
	PUSHL $0
	PUSHL $18
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR19:
	CLI
	PUSHL $0
	PUSHL $19
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR20:
	CLI
	PUSHL $0
	PUSHL $20
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR21:
	CLI
	PUSHL $0
	PUSHL $21
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR22:
	CLI
	PUSHL $0
	PUSHL $22
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR23:
	CLI
	PUSHL $0
	PUSHL $23
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR24:
	CLI
	PUSHL $0
	PUSHL $24
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR25:
	CLI
	PUSHL $0
	PUSHL $25
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR26:
	CLI
	PUSHL $0
	PUSHL $26
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR27:
	CLI
	PUSHL $0
	PUSHL $27
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR28:
	CLI
	PUSHL $0
	PUSHL $28
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR29:
	CLI
	PUSHL $0
	PUSHL $29
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR30:
	CLI
	PUSHL $0
	PUSHL $30
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR31:
	CLI
	PUSHL $0
	PUSHL $31
	JMP ISR_COMMON_STUB
	.LONG 0
	.WORD 0
ISR_COMMON_STUB:
	PUSHAL
	MOV %DS, %AX
	PUSH %EAX
	MOV $0x10, %AX
	MOV %AX, %DS
	MOV %AX, %ES
	MOV %AX, %FS
	MOV %AX, %GS
	
	CALL ISR_HANDLER

	POP %EAX
	MOV %AX, %DS
	MOV %AX, %ES
	MOV %AX, %FS
	MOV %AX, %GS
	POPAL
	ADD $8, %ESP
	STI
	IRET

