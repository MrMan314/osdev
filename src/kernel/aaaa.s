.CODE32
.GLOBL _start
.EXTERN CLEAR
.EXTERN ISR_BEGIN
.EXTERN PS2_INIT
.EXTERN FLOPPY_DETECT
.EXTERN PRINT_HEX_8
.EXTERN PRINT_HEX_16
.EXTERN PRINT_HEX_32
.EXTERN ANALYZE_RSDT
.EXTERN LOCATE_RSDT
.EXTERN LOAD_SDT
.EXTERN INTERRUPT_INIT

_start:
	CLI

	CALL CLEAR

	MOV $0x000B80A0, %EDI
	CALL LOCATE_RSDT
	CALL LOAD_SDT
	CALL ANALYZE_RSDT
	CALL FLOPPY_DETECT
	CALL PS2_INIT
	CALL INTERRUPT_INIT

	MOV $0xDEADBEEF, %EAX
	MOV $0xF0, %CH
	MOV $0xB8F90, %EDI
	CALL PRINT_HEX_32

LOOP:
	JMP LOOP

